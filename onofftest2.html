<HTML>
 <HEAD>
  <TITLE> say hi2 </TITLE>
 
 </HEAD>
 <style>
     #showhide {         
         position : absolute; 
         top : 40px; 
         left : 50%; 
         height : 800px; 
         width : 800px; 
         margin-left : -400px;
     }
     #hs {position : absolute; height : 1000px; width : 1200px; left : 50%; margin-left : -600px;}
     #finall {
         position : absolute;
         top : 40px;
         left : 50%;
         height : 800px; 
         width : 650px; 
         margin-left : -325px;}
 </style>
 
<script>
    var name;
    var age = Number(prompt('age : ',parseInt(Math.random()*100).toString()));
    var result = 0;
    
    var q = -1;
    var starttime = new Date().getTime();
    var startttime = new Date().getTime() + 1000000;
    var starttttime;
    var endtime2 = 0;
    var tag = "./images/";
    var c = ['01','02','03','04','05','06','07','08','09','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60'];
    var d = ["1.png", "2.png"];
    var states = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59];
    var descs = ["s1w1.png","s1w2.png","s1w3.png","s1w4.png"];
    var decc = 0;
    var cccc;

    function shuffle(array) {
        array.sort(() => Math.random() - 0.5);
    }
    shuffle(states);
    var num = 0;
    var state = states[0];
    function createAjax(){
                if(typeof(ActiveXObject)=="function"){
                        try{
                                return new ActiveXObject("Msxml2.XMLHTTP");
                        }catch(e){
                                try{
                                        return new ActiveXObject("Microsoft.XMLHTTP");
                                }catch(e){
                                        self.alert("Ajax object create failed(IE)");
                                        return null;
                                }
                        }
                }else if(typeof(XMLHttpRequest) == "object" || typeof(XMLHttpRequest)=="function"){
                        return new XMLHttpRequest();
                }else{
                        self.alert("Ajax object create failed");
                        return null;
                }
    }

    var myajax = createAjax();   
    function restart(){
        startttime = new Date().getTime() + 1000000;
        result = -1;
        num = 0;
        decc = 0;
        state = states[0];
        document.getElementById("hs").style.display ='block';
        document.getElementById("showhide").style.display ='none';
        setstate();
    }
    function startop(){
        starttime = new Date().getTime();
       
        document.getElementById("hs").style.display ='none';
        document.getElementById("showhide").style.display ='block';
        starttime = new Date().getTime();
        startttime = new Date().getTime();
        starttttime = new Date().getTime();
        hash();
        name = cccc;
        
        setstate();
    }
    function setstate(){
        document.getElementById("eximg1").src = tag + c[state]+d[0];
        document.getElementById("eximg2").src = tag + c[state]+d[1];
        let qwer = parseInt(Math.random()*2);
        document.getElementById("button1").style.left = (10+(210*qwer)) + "px"; 
        document.getElementById("button2").style.left = (10+(210*(1-qwer))) + "px"; 
        document.getElementById("page").textContent = (num+1)+"/60";
    }
    function but1(){
        document.getElementById("button1").style.border = "4px solid #808080";
        document.getElementById("button2").style.border = "1px solid #D3D3D3";
        document.getElementById("button3").style.border = "1px solid #D3D3D3";
        document.getElementById("button4").style.border = "1px solid #D3D3D3";
        q = 0;
        endtime2  = new Date().getTime();
    }
    function but2(){
        document.getElementById("button1").style.border = "1px solid #D3D3D3";
        document.getElementById("button2").style.border = "4px solid #808080";
        document.getElementById("button3").style.border = "1px solid #D3D3D3";
        document.getElementById("button4").style.border = "1px solid #D3D3D3";
        q = 1;
        endtime2  = new Date().getTime();
    }
    function but3(){
        document.getElementById("button1").style.border = "1px solid #D3D3D3";
        document.getElementById("button2").style.border = "1px solid #D3D3D3";
        document.getElementById("button3").style.border = "4px solid #808080";
        document.getElementById("button4").style.border = "1px solid #D3D3D3";
        q = 2;
        endtime2  = new Date().getTime();
    }
    function but4(){
        document.getElementById("button1").style.border = "1px solid #D3D3D3";
        document.getElementById("button2").style.border = "1px solid #D3D3D3";
        document.getElementById("button3").style.border = "1px solid #D3D3D3";
        document.getElementById("button4").style.border = "4px solid #808080";
        q = 3;
        endtime2  = new Date().getTime();
    }
    function next(){
        startttime = new Date().getTime();
        result = q;
        submitScore();
        if(num >= 59){
            let endtime = new Date().getTime();
            if(endtime - starttttime <= 27000){
                document.getElementById("hs").style.display ='none';
                document.getElementById("showhide").style.display ='none';
                document.getElementById("finall").style.display ='none';
                document.getElementById("timeout2").style.display ='block';
            }
            else{
                let finnum = name;
                document.getElementById("fin").textContent = "code is : " + finnum;
                document.getElementById("hs").style.display ='none';
                document.getElementById("showhide").style.display ='none';
                document.getElementById("finall").style.display ='block';
            }
        }
        else{
            if(q != -1){
                num += 1;
                state = states[num];
                setstate();
                q = -1;
                document.getElementById("button1").style.border = "1px solid #D3D3D3";
                document.getElementById("button2").style.border = "1px solid #D3D3D3";
                document.getElementById("button3").style.border = "1px solid #D3D3D3";
                document.getElementById("button4").style.border = "1px solid #D3D3D3";
                document.getElementById("onn").style.display ='none';
                starttime = new Date().getTime();
            }
            else{
                document.getElementById("onn").style.display ='block';
                starttime = new Date().getTime();
            }
        }
    }
    function submitScore(){
        let idid = state;
        let namename = name;
        let ageage = age.toString();
        let rresult = result.toString();
        let asqw = endtime2 - starttime;
        let timetime = asqw.toString();

        var data = new FormData();
        data.append('id',idid);
        data.append('name',namename);
        data.append('age',ageage);
        data.append('result',rresult);
        data.append('time',timetime);
        myajax.open('POST', 'server2.php');
        myajax.send(data);
    }
    function hash(){
        let aaaa = Math.floor(Math.random()*9000 + 1000);
        let bbbb = (aaaa * 553 + 6823)%10000;
        cccc = (aaaa%100)*1000000 + parseInt(bbbb/100)*10000 + parseInt(aaaa/100)*100 + bbbb%100;
    }
    function timeout(){
        let endtime = new Date().getTime();
        if(endtime - startttime >= 20000){
            if(num < 59){
                document.getElementById("hs").style.display ='none';
                document.getElementById("showhide").style.display ='none';
                document.getElementById("finall").style.display ='none';
                document.getElementById("timeout1").style.display ='block';
            }
        }
    }
    function nextop(){
        decc += 1;
        if(decc == 3){
            document.getElementById("startbt").style.display ='block';
            document.getElementById("nextbt").style.display ='none';
        }
        document.getElementById("descptn").src = tag + descs[decc];
    }
    function prevop(){
        if(decc >= 1){
            decc -= 1;
            if(decc == 3){
                document.getElementById("startbt").style.display ='none';
                document.getElementById("nextbt").style.display ='block';
            }
            document.getElementById("descptn").src = tag + descs[decc];
        }
        else{
            restart();
        }
    }
    timeout();
    setInterval(timeout, 1000);

</script>
<body>
	<div style = "background-color: #FFFFFF; height:100%; width:100%;">
    <div id="showhide" align="middle" style = "display : none;">
        <p style="text-align: center; font-size : 30;">Which button do you think will turn a function ON?</p>
        <div id = "button1" onClick="but1()"  style="position : absolute; height : 219px; width : 180px; left:10px; top:150px; border-radius: 20px / 20px; border : 1px solid #D3D3D3;">
            <img id="eximg1" src="./images/011.png" style="position : absolute; left:15px; top:15px; height:189px; width:150px;"/>
        </div>
        <div id = "button2" onClick="but2()"  style="position : absolute; height : 219px; width : 180px; left:210px; top:150px;  border-radius: 20px / 20px;  border : 1px solid #D3D3D3;">
            <img id="eximg2" src="./images/011.png" style="position : absolute; left:15px; top:15px; height:189px; width:150px;"/>
        </div>
        <div id = "button3" onClick="but3()"  style="position : absolute; height : 219px; width : 180px; left:410px; top:150px;  border-radius: 20px / 20px;  border : 1px solid #D3D3D3; background-color: #FFFFFF;">
            <img id="eximg3" src="./images/b1.png" style="position : absolute; left:15px; top:15px; height:189px; width:150px;"/>
        </div>
        <div id = "button4" onClick="but4()"  style="position : absolute; height : 219px; width : 180px; left:610px; top:150px;  border-radius: 20px / 20px;  border : 1px solid #D3D3D3; background-color: #FFFFFF; ">
            <img id="eximg4" src="./images/b2.png" style="position : absolute; left:15px; top:15px; height:189px; width:150px;"/>
        </div>
        <p id = "onn" style = "
            font-size:30; 
            position : absolute;
            top : 450px;
            left : 50%; 
            color:red;
            margin-left : -125px; 
            display : none;"><strong>Click any button!!</strong></p>
        <p id = "page" style = "
            font-size: 25; 
            top : 880px;
            position : absolute;
            left : 450px;" > 1/18 </p>
        <img src="./images/doneb.png" id="submitbt" onClick="next()" style="position : absolute; top : 500px; left : 550px;  height : 127px; width : 189px;">
    </div>
    <div id= "hs">
        <center style = "font-size:40; ">Please read the description carefully</center>
        <img id = "startbt" src="./images/startb.png" onclick= "startop()" style="position : absolute; absolute; left:748px; top:750px; height : 127px; width : 189px; display : none;" >
        <img id = "descptn" src="./images/s1w1.png" style="position : absolute; left:263px; top:100px; pointer-events: none; border : 4px solid #000000;" >
        <img  src="./images/previousb.png" onclick= "prevop()" style="position : absolute; left:263px; top:750px;  height : 127px; width : 189px;" >
        <img id = "nextbt" src="./images/nextb.png" onclick= "nextop()" style="position : absolute; left:748px; top:750px;  height : 127px; width : 189px;" >
    </div>
    <div id= "finall" align="middle" style = "display : none;">
        <p id = "fin" style = "font-size:30;">mm</p>
    </div>
    <div id= "timeout1" align="middle" style = "display : none;">
        <p id = "fin" style = "font-size:30; ">time over!! press f5 to restart</p>
    </div>
    <div id= "timeout2" align="middle" style = "display : none;">
        <p id = "fin" style = "font-size:30; ">too fast!! press f5 to restart</p>
    </div>
    </div>
</body>
</HTML>